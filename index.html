<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI ToDo App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    h1 {
      text-align: center;
    }

    #todoInput {
      width: 70%;
      padding: 10px;
      font-size: 16px;
    }

    #addBtn {
      padding: 10px 20px;
      font-size: 16px;
    }

    select {
      padding: 10px;
      margin-left: 10px;
      font-size: 16px;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      padding: 10px;
      margin: 5px 0;
      background-color: #f0f0f0;
      cursor: pointer;
    }

    li.completed {
      text-decoration: line-through;
      background-color: #d4edda;
    }

    .translation {
      color: #888;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <h1>ğŸ§  AI Todo App</h1>
  <input type="text" id="todoInput" placeholder="Enter a to-do item" />
  <button id="addBtn">Add</button>

  <select id="languageSelect">
    <option value="es">Spanish ğŸ‡ªğŸ‡¸</option>
    <option value="fr">French ğŸ‡«ğŸ‡·</option>
    <option value="de">German ğŸ‡©ğŸ‡ª</option>
    <option value="it">Italian ğŸ‡®ğŸ‡¹</option>
    <option value="pt">Portuguese ğŸ‡µğŸ‡¹</option>
    <option value="zh">Chinese ğŸ‡¨ğŸ‡³</option>
    <option value="ja">Japanese ğŸ‡¯ğŸ‡µ</option>
    <option value="ko">Korean ğŸ‡°ğŸ‡·</option>
    <option value="ar">Arabic ğŸ‡¸ğŸ‡¦</option>
    <option value="hi">Hindi ğŸ‡®ğŸ‡³</option>
    <option value="ru">Russian ğŸ‡·ğŸ‡º</option>
    <option value="nl">Dutch ğŸ‡³ğŸ‡±</option>
    <option value="sv">Swedish ğŸ‡¸ğŸ‡ª</option>
    <option value="no">Norwegian ğŸ‡³ğŸ‡´</option>
    <option value="pl">Polish ğŸ‡µğŸ‡±</option>
  </select>

  <ul id="todoList"></ul>

  <script>
    const input = document.getElementById("todoInput");
    const addBtn = document.getElementById("addBtn");
    const todoList = document.getElementById("todoList");
    const languageSelect = document.getElementById("languageSelect");

    addBtn.addEventListener("click", async () => {
      const text = input.value.trim();
      const lang = languageSelect.value;
      if (!text) return;

      // Send translation request to backend
      const response = await fetch("/translate", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ text, target_lang: lang })
      });

      const data = await response.json();
      const translated = data.translated_text || "(Translation failed)";

      const li = document.createElement("li");
      li.textContent = text;
      li.addEventListener("click", () => {
        li.classList.toggle("completed");
      });

      const translationEl = document.createElement("div");
      translationEl.classList.add("translation");
      translationEl.textContent = translated;

      li.appendChild(translationEl);
      todoList.appendChild(li);
      input.value = "";
    });
  </script>
</body>
</html>
